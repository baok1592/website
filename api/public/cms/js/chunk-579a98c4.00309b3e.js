(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-579a98c4","chunk-cdc4cece"],{"085b":function(t,i,e){"use strict";var s=e("e99b"),a=e("52a4")(!1),n=[].indexOf,l=!!n&&1/[1].indexOf(1,-0)<0;s(s.P+s.F*(l||!e("95b6")(n)),"Array",{indexOf:function(t){return l?n.apply(this,arguments)||0:a(this,t,arguments[1])}})},3733:function(t,i,e){},5795:function(t,i,e){"use strict";e("3733")},"95b6":function(t,i,e){"use strict";var s=e("0926");t.exports=function(t,i){return!!t&&s((function(){i?t.call(null,(function(){}),1):t.call(null)}))}},a450:function(t,i,e){var s=e("bb8b").f,a=Function.prototype,n=/^\s*function ([^ (]*)/,l="name";l in a||e("26df")&&s(a,l,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},bb24:function(t,i,e){"use strict";e("ca2f")},ca2f:function(t,i,e){},d8d5:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"index_manage"},[e("el-container",[e("el-aside",{attrs:{width:"200px"}},[e("NavTo")],1),e("el-container",[e("el-header",{staticStyle:{"border-bottom":"1px solid #d0d0d0"}},[e("Header")],1),e("el-main",{staticStyle:{"background-color":"#F3F3F3"}},[e("el-tabs",[e("el-tab-pane",[e("span",{staticStyle:{"font-size":"18px"},attrs:{slot:"label"},slot:"label"},[t._v("模 板")]),e("el-row",{staticClass:"mt-2"},[e("div",{staticClass:"tmp-lists"},[e("div",{staticClass:"tmp-panel"},[t.pc_tmp&&t.pc_tmp.tep&&t.pc_tmp.tep.img_url?[e("img",{attrs:{src:t.getimg+t.pc_tmp.tep.img_url,alt:""}})]:t._e(),e("img",{attrs:{src:t.getimg+t.urltest,alt:""}}),t.pc_tmp&&t.pc_tmp.tep&&t.pc_tmp.tep.cn_name?e("span",{staticClass:"tmp-panel-title"},[t._v(t._s(t.pc_tmp.tep.cn_name))]):t._e(),e("div",{staticClass:"tmp-panel-btns"},[e("span",{staticClass:"text-red"},[t._v("当前模板")])])],2),t._l(t.tmp_list,(function(i){return[i&&t.pc_tmp.tep&&t.pc_tmp.tep.temp_num&&i.temp_num!=t.pc_tmp.tep.temp_num?[e("div",{staticClass:"tmp-panel"},[i.img_url?[e("img",{attrs:{src:t.getimg+i.img_url,alt:""}})]:t._e(),e("span",{staticClass:"tmp-panel-title"},[t._v(t._s(i.cn_name))]),e("div",{staticClass:"tmp-panel-btns"},[[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.change_pc(i.temp_num)}}},[t._v("使用该模板")])]],2)],2)]:t._e()]}))],2)])],1)],1)],1)],1)],1),e("Pic",{attrs:{drawer:t.drawer,father_fun:t.get_img,length:t.length}})],1)},a=[],n=(e("6a61"),e("2e91")),l=e("15fc"),o=e("71c2"),c=e("f820"),r={data:function(){return{is_lanmu:0,is_edit:0,nav_list:[],category:"",cate_list:"",getimg:this.$getimg,urltest:"/uploads//imgs/a1.jpg",length:1,drawer:!1,img_list:[],formLabelWidth:"120px",addbox:!1,addform:{navigation_name:"",template_id:"",img_id:"",category_id:"",url:""},url_list:[{name:"首页",path:"home/home"},{name:"分类",path:"cate/cate"},{name:"列表",path:"lists/lists"},{name:"封面",path:"us/us"}],list:[1,2,3,4,5,6,7,8,9],show:2,btn_name:"设置首页内容",tableData:[],options:[],value:"",nav_Tem_list:[],pc_index_list:[],phone_index_list:[],using_list:"",phone_using:"",pc_using:"",pc_tmp:"",tmp_list:[]}},components:{NavTo:l["a"],Header:o["a"],Pic:c["default"]},mounted:function(){this._load()},methods:{change_pc:function(t){var i=this,e=this;console.log("pc"),this.http.post_show("system/admin/edit_tep",{type:t}).then((function(t){i.$message({type:"success",message:"修改模板成功"}),e._load()}))},_load:function(){var t=this;this.http.get("/temp/admin/get_all_temp").then((function(i){t.tmp_list=i.data,console.log(t.tmp_list)})),t.get_pc_tmp()},get_pc_tmp:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=this,t.next=3,this.http.get("common/template/get_pc_tep").then((function(t){i.pc_tmp=t.data}));case 3:case"end":return t.stop()}}),t,this)})));function i(){return t.apply(this,arguments)}return i}(),getCategory:function(){var t=this,i=[];this.http.get("category/get_category_all").then((function(e){console.log("getCategory:",e);for(var s=0;s<e.data.length;s++)1==e.data[s].level&&i.push(e.data[s]),2==e.data[s].level?e.data[s].line=!0:e.data[s].line=!1;t.category=e.data,t.cate_list=e.data}))},use_pc_tem:function(t,i){var e=this;this.http.get("template/update_config",{tmp:t}).then((function(t){e.$message({message:"操作成功",type:"success"}),e._load()}))},install_phone_tmp:function(t,i){var e=this;this.http.put("template/up_phoneIndexTmp",{id:t}).then((function(t){e.$message({message:"操作成功",type:"success"}),e._load()}))},handleClose:function(){this.addbox=!1,this.clearn_data()},edit:function(t,i){this.is_edit=1,this.img_list=[],console.log(t),this.addbox=!0,this.addform.id=i,this.addform.img_id=t.img_id,this.addform.template_id=t.template_id,this.addform.navigation_name=t.navigation_name,this.addform.url=t.url,this.addform.category_id=t.access_type;var e={id:t.img_id,url:t.img};this.img_list.push(e),console.log(this.addform)},del:function(t){var i=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.$message({type:"success",message:"删除成功!"})})).catch((function(){i.$message({type:"info",message:"已取消删除"})}))},choose_url:function(t){var i=this;console.log(t),this.nav_list=[],"cate/cate"!=t&&"lists/lists"!=t||(this.nav_list=this.nav_Tem_list.data.listTemplate,i.is_lanmu="lists/lists"==t?1:0),"home/home"==t&&(i.is_lanmu=0,this.nav_list=this.nav_Tem_list.data.indexTemplate),"us/us"==t&&(i.is_lanmu=0,this.nav_list=this.nav_Tem_list.data.columnTemplate),console.log(this.nav_list),console.log(this.nav_Tem_list)},onSubmit:function(){var t=this;1==this.is_edit?(console.log(this.addform),this.http.post("phone/bottomNavigation/up_bottom_navigation",this.addform).then((function(i){t.$message({type:"success",message:"修改成功!"}),t.is_edit=0,t.addbox=!1,t.clearn_data(),t._load()}))):(console.log(this.addform),this.addbox=!1,this._load(),this.clearn_data())},to_choose_img:function(){this.drawer=!this.drawer},is_show:function(){this.show=1},back:function(){this.show=2},shows:function(){this.addbox=!0},get_img:function(t){for(var i in this.drawer=!1,t){var e=t[i];this.img_list.push(e),this.addform.img_id=e.id}this.length=6-this.img_list.length,console.log("get_img_end:",t,this.img_list),console.log(this.addform)},delimg:function(t){this.img_list.splice(t,1)},cancel:function(){this.addbox=!1,this.clearn_data()},clearn_data:function(){this.addform={navigation_name:"",template_id:"",img_id:"",category_id:"",url:""},this.img_list=[]}}},m=r,d=(e("bb24"),e("5d22")),_=Object(d["a"])(m,s,a,!1,null,null,null);i["default"]=_.exports},f820:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"about"},[e("el-drawer",{attrs:{title:"图库管理",visible:t.drawer,direction:"rtl",size:"35%","before-close":t.close_box},on:{"update:visible":function(i){t.drawer=i}}},[e("span",[e("div",{staticClass:"rltan"},[e("div",{staticClass:"btn"},[e("el-button",{on:{click:function(i){t.dialogVisibleadd=!0}}},[t._v("添加")])],1),e("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.category_nav},model:{value:t.activeName,callback:function(i){t.activeName=i},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"全部",name:"0"}}),t._l(t.img_category,(function(t){return[e("el-tab-pane",{attrs:{label:t.category_name,name:t.id+""}})]}))],2),e("div",{staticClass:"con"},[e("el-upload",{attrs:{action:t.upfile_url,data:{cid:t.cate_id,back:"idurl"},"on-success":t.upimg_back_fun,headers:t.upfile_head,limit:9,multiple:"","show-file-list":!1,"file-list":t.upfile_banner_list,name:"img","list-type":"picture-card"}},[e("i",{staticClass:"el-icon-plus"})]),e("el-dialog",{attrs:{visible:t.dialogVisiblea},on:{"update:visible":function(i){t.dialogVisiblea=i}}}),e("div",{staticStyle:{height:"25px"}}),e("el-row",{attrs:{gutter:18}},[0==t.cate_id?t._l(t.img_list,(function(i,s){return e("el-col",{key:s,attrs:{span:6}},[e("div",{class:t.tab_css(s)},[e("img",{staticClass:"img",attrs:{src:t.getimg+i.url},on:{click:function(i){return t.choose_img(s)}}})])])})):t._l(t.imgB,(function(i,s){return e("el-col",{key:s,staticClass:"abox",attrs:{span:6}},[e("div",{class:t.tab_css(s)},[e("img",{staticClass:"img",attrs:{src:t.getimg+i.url},on:{click:function(i){return t.choose_img(s)}}})])])}))],2),e("div",{staticStyle:{height:"300px"}})],1),e("div",{staticClass:"footbtn"},[e("el-button",{on:{click:t.close_box}},[t._v("取消")]),e("el-button",{attrs:{type:"warning"},on:{click:t.del_img}},[t._v("删除")]),e("el-button",{attrs:{type:"primary"},on:{click:t.add_img}},[t._v("确定")])],1)],1)])]),e("el-dialog",{attrs:{title:"添加图片分类",visible:t.dialogVisibleadd,width:"30%"},on:{"update:visible":function(i){t.dialogVisibleadd=i}}},[e("el-form",{ref:"cate_form",attrs:{model:t.cate_form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"分类名称"}},[e("el-input",{model:{value:t.cate_form.category_name,callback:function(i){t.$set(t.cate_form,"category_name",i)},expression:"cate_form.category_name"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(i){t.dialogVisibleadd=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)},a=[],n=(e("a450"),e("085b"),e("a49b")),l={data:function(){return{activeName:"first",form:{name:"",banner_imgs:""},dialogVisibleadd:!1,dialogVisiblea:!1,getimg:this.$getimg,cate_id:"0",cate_form:{category_name:""},img_category:"",img_list:[],checkList:[],add_img_list:[],upfile_url:n["a"]+"image/upload_img",upfile_head:{token:localStorage.getItem("token")},upfile_list:[],upfile_list_sku:[],upfile_banner_list:[]}},props:{drawer:"",length:"",ishead:"",father_fun:Function,iscg:""},components:{},mounted:function(){this._load(),this.checkList=[]},methods:{_load:function(){var t=this;this.http.get("image/get_img_all").then((function(i){t.img_list=i.data}))},onSubmit:function(){var t=this;this.http.post_show("img_category/admin/add_category",this.cate_form).then((function(i){t.$message({message:"添加成功",type:"success"}),t.dialogVisibleadd=!1,t._load()}))},change_del:function(){this.checkList=[],this.show_choose="",this.length=this.img_list.length},add_img:function(){console.log("start:",this.checkList,this.img_list,this.add_img_list);var t=this;for(var i in this.checkList){var e=this.checkList[i];for(var s in this.img_list)e==s&&t.add_img_list.push({id:this.img_list[s].id,url:this.img_list[s].url})}if(this.add_img_list.length<=this.length){var a=this.add_img_list;this.add_img_list=[],this.checkList=[],this.father_fun(a),this.drawer=!1}else this.$message({message:"最多选择"+this.length+"张图片",type:"warning"})},tab_css:function(t){return this.checkList.indexOf(t)>-1?"pic1":"pic"},choose_img:function(t){console.log("choose_img",t,this.length);var i=this;if(i.checkList.indexOf(t)>-1){var e=i.checkList.indexOf(t);i.checkList.splice(e,1)}else{if(!(i.checkList.length<i.length))return void this.$message({message:"最多选择"+this.length+"张图片",type:"warning"});i.checkList.push(t)}console.log(this.checkList)},del_img:function(){var t=this,i=[];for(var e in this.checkList){var s=this.checkList[e];for(var a in this.img_list)s==a&&i.push(this.img_list[a].id)}this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.http.del("image/del_img",{ids:i}).then((function(i){t.$message({type:"success",message:i.msg}),t.checkList=[],t._load()}))}))},upimg_back_fun:function(t){this.$message({type:"success",message:"上传成功"}),console.log(t),console.log(this.upfile_banner_list),this._load()},category_nav:function(t){this.cate_id=t.name;var i=[];for(var e in this.img_list){var s=this.img_list[e];s.category_id==t.name&&i.push(s)}this.imgB=i},close_box:function(){console.log("xxx"),this.add_img_list=[],this.checkList=[],this.add_img()}}},o=l,c=(e("5795"),e("5d22")),r=Object(c["a"])(o,s,a,!1,null,null,null);i["default"]=r.exports}}]);