(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e02fd88"],{"29f7":function(t,e,a){},3151:function(t,e,a){"use strict";a("29f7")},3706:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"admin"},[a("el-container",[a("el-aside",{attrs:{width:"200px"}},[a("NavTo")],1),a("el-container",[a("el-header",{staticStyle:{"border-bottom":"1px solid #d0d0d0","background-color":"#FFFFFF"}},[a("Header")],1),a("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[a("el-main",[a("el-tabs",{staticStyle:{"background-color":"#FFFFFF"},attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"管理员",name:"first"}},[a("el-button",{staticStyle:{display:"flex","justify-content":"flex-start","margin-bottom":"20px","margin-top":"10px","margin-left":"10px"},attrs:{type:"primary"},on:{click:t.add_admin}},[t._v("添加管理员")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"nickname",label:"姓名"}}),a("el-table-column",{attrs:{prop:"groups.name",label:"所在分组"}}),a("el-table-column",{attrs:{prop:"state",label:"是否禁用"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(1==e.row.state?"是":"否")+"\n\t\t\t\t\t\t\t\t\t")]}}])}),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success"},on:{click:function(a){return t.edit_admin(e.row,e.row.id)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.del_admin(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"分组管理",name:"second"}},[1==t.is_add?[a("el-button",{staticStyle:{display:"flex","justify-content":"flex-start","margin-bottom":"20px","margin-top":"10px","margin-left":"10px"},attrs:{type:"primary"},on:{click:t.add_group}},[t._v("添加分组")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.group_list,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:"分组名称",width:"180"}}),a("el-table-column",{attrs:{prop:"rule",label:"分组规则"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.rule,(function(e){return[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.rule_list_b[e].title)+",\n\t\t\t\t\t\t\t\t\t\t\t")]}))]}}],null,!1,1831601063)}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success"},on:{click:function(a){return t.edit_group(e.row.id)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.del_group(e.row.id)}}},[t._v("删除")])]}}],null,!1,1503605502)})],1)]:t._e(),2==t.is_add?[a("el-button",{staticStyle:{display:"flex","justify-content":"flex-start","margin-bottom":"20px","margin-top":"10px","margin-left":"10px"},attrs:{type:"primary"},on:{click:t.back}},[t._v("返回")]),a("el-form",{ref:"form",attrs:{model:t.add_group_form,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"分组名"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.add_group_form.name,callback:function(e){t.$set(t.add_group_form,"name",e)},expression:"add_group_form.name"}})],1),a("el-form-item",{attrs:{label:"分组规则"}},[a("el-checkbox-group",{attrs:{size:"medium"},on:{change:t.choose_rule},model:{value:t.add_group_form.oauth,callback:function(e){t.$set(t.add_group_form,"oauth",e)},expression:"add_group_form.oauth"}},[t._l(t.rule_list,(function(t){return[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:6}},[a("el-checkbox",{attrs:{label:t.title,value:t.id,border:""}})],1)]}))],2)],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"left",padding:"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.sub}},[t._v("确 定")])],1)]:t._e()],2)],1)],1)],1)],1)],1),a("el-dialog",{attrs:{title:"添加管理员",visible:t.add_admin_dialog,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.add_admin_dialog=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"管理员分组"}},[a("el-select",{attrs:{placeholder:"请选择分组"},on:{change:t.get_gid},model:{value:t.form.gid,callback:function(e){t.$set(t.form,"gid",e)},expression:"form.gid"}},[t._l(t.group_list,(function(t){return[a("el-option",{attrs:{label:t.name,value:t.id}})]}))],2)],1),a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel_add}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.sub_add}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改管理员",visible:t.edit_admin_dialog,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.edit_admin_dialog=e}}},[a("el-form",{ref:"form",attrs:{model:t.edit_form,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"管理员分组"}},[a("el-select",{attrs:{placeholder:"请选择分组"},model:{value:t.edit_form.gid,callback:function(e){t.$set(t.edit_form,"gid",e)},expression:"edit_form.gid"}},[t._l(t.group_list,(function(t){return[a("el-option",{attrs:{label:t.name,value:t.id}})]}))],2)],1),a("el-form-item",{attrs:{label:"昵称"}},[a("el-input",{model:{value:t.edit_form.nickname,callback:function(e){t.$set(t.edit_form,"nickname",e)},expression:"edit_form.nickname"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{model:{value:t.edit_form.description,callback:function(e){t.$set(t.edit_form,"description",e)},expression:"edit_form.description"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel_edit}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.sub_edit}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"添加分组",visible:t.add_group_dialog,width:"60%","before-close":t.handleClose},on:{"update:visible":function(e){t.add_group_dialog=e}}}),a("el-dialog",{attrs:{title:"修改分组",visible:t.edit_group_dialog,width:"60%","before-close":t.handleClose},on:{"update:visible":function(e){t.edit_group_dialog=e}}},[a("el-form",{ref:"form",attrs:{model:t.edit_group_form,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"分组名"}},[a("el-input",{model:{value:t.edit_group_form.name,callback:function(e){t.$set(t.edit_group_form,"name",e)},expression:"edit_group_form.name"}})],1),a("el-form-item",{attrs:{label:"分组规则"}},[a("el-checkbox-group",{attrs:{size:"medium"},on:{change:t.choose_rule},model:{value:t.edit_group_form.oauth,callback:function(e){t.$set(t.edit_group_form,"oauth",e)},expression:"edit_group_form.oauth"}},[t._l(t.rule_list,(function(t){return[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:6}},[a("el-checkbox",{attrs:{label:t.title,value:t.id,border:""}})],1)]}))],2)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel_edit_group}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.sub_edit_group}},[t._v("确 定")])],1)],1)],1)},o=[],n=(a("a450"),a("15fc")),l=a("71c2"),r={data:function(){return{is_add:1,choose_list:[],radio:0,gid:"",add_admin_dialog:!1,edit_admin_dialog:!1,add_group_dialog:!1,edit_group_dialog:!1,tableData:[],group_list:[],activeName:"first",rule_list:[{id:1,name:"AdminManage,Backup,Group,System",title:"管理员"},{id:2,name:"ProductManage/addProduct",title:"添加商品"},{id:3,name:"ProductManage/deleteProduct",title:"删除商品"},{id:4,name:"ProductManage/editProduct",title:"修改商品"},{id:5,name:"ProductManage/getProduct",title:"获取商品"},{id:6,name:"CategoryManage/addCategory",title:"增加分类"},{id:7,name:"CategoryManage/deleteCategory",title:"删除分类"},{id:8,name:"CategoryManage/editCategory",title:"修改分类"},{id:9,name:"CategoryManage/getCateSort",title:"获取分类"},{id:10,name:"OrderManage/deleteOrder",title:"删除订单"},{id:11,name:"OrderManage/getOrderAll",title:"获取订单列表"},{id:12,name:"OrderManage/editCourier",title:"订单发货"},{id:13,name:"ArticleManage/addArticle",title:"添加文章"},{id:14,name:"ArticleManage/editArticle",title:"修改文章"},{id:15,name:"ArticleManage/deleteArticle",title:"删除文章"},{id:16,name:"ArticleManage/adminGetAllArticle",title:"获取文章"},{id:17,name:"BannerManage/addBanner",title:"添加广告"},{id:18,name:"BannerManage/deleteBanner",title:"删除广告"},{id:19,name:"BannerManage/editBanner",title:"修改广告"},{id:20,name:"BannerManage/adminAllBanner",title:"获取广告"},{id:21,name:"NavManage/addNav",title:"添加导航"},{id:22,name:"NavManage/editNav",title:"修改导航"},{id:23,name:"NavManage/deleteNav",title:"删除导航"},{id:24,name:"NavManage/getNav",title:"获取导航"},{id:25,name:"RateManage",title:"评价管理"},{id:26,name:"TuiManage",title:"退款管理"},{id:27,name:"Common\\upValue",title:"更新不同模型的布尔字段"},{id:28,name:"CouponManage",title:"优惠券管理"},{id:29,name:"FxManage",title:"分销管理"},{id:30,name:"Delivery",title:"运费模板管理"},{id:31,name:"DiscountManage",title:"限时折扣管理"},{id:32,name:"PtManage",title:"拼团管理"}],group_list_b:[],rule_list_b:[],form:{nickname:"",username:"",description:"",gid:"",password:"",edi:""},edit_form:{nickname:"",description:"",gid:"",id:""},add_group_form:{name:"",oauth:[]},edit_group_form:{name:"",oauth:[],id:""}}},mounted:function(){this._load()},components:{Header:l["a"],NavTo:n["a"]},methods:{sub:function(){var t=this;this.http.post("group/createGroup",this.add_group_form).then((function(e){t.$message({type:"success",message:"添加成功!"}),t.is_add=1,t._load()}))},_load:function(){var t=this;this.http.get("admins/get_admin_all").then((function(e){t.tableData=e.data}))},edit_group:function(t){var e=this;this.edit_group_dialog=!0,this.http.post("group/getGroupContent",{id:t}).then((function(t){e.edit_group_form.id=t.data.id,e.edit_group_form.name=t.data.name,e.edit_group_form.oauth=t.data.oauth,console.log(e.edit_group_form);var a=[];for(var i in e.rule_list){var o=e.rule_list[i];for(var n in t.data.oauth){var l=t.data.oauth[n];l==1*o.id&&a.push(o.title)}}e.edit_group_form.oauth=a}))},sub_edit_group:function(){var t=this;this.edit_group_form.oauth=this.choose_list,this.http.post("group/updateGroup",this.edit_group_form).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.edit_group_form={id:"",name:"",oauth:[]},t.edit_group_dialog=!1,t._load()}))},cancel_edit_group:function(){this.edit_group_form={id:"",name:"",oauth:[]},this.edit_group_dialog=!1},del_group:function(t){var e=this;this.$confirm("确定删除该分组？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.put("group/deleteGroup",{id:t}).then((function(t){e.$message({type:"success",message:"删除成功!"}),e._load()}))}))},choose_rule:function(t){console.log(t);var e=[];for(var a in this.rule_list){var i=this.rule_list[a];for(var o in t){var n=t[o];i.title==n&&e.push(i.id)}}this.choose_list=e,console.log(e)},add_group:function(){this.is_add=2},back:function(){this.is_add=1},sub_add_group:function(){var t=this;this.add_group_form.oauth=this.choose_list,console.log(this.add_group_form),this.http.post("group/admin/add_group",this.add_group_form).then((function(e){t.$message({type:"success",message:"添加成功!"}),t.add_group_form={name:"",oauth:[]},t.add_group_dialog=!1,t._load()}))},cancel_add_group:function(){this.add_group_form={name:"",rule_ids:[]},this.add_group_dialog=!1},edit_admin:function(t,e){console.log(t),this.edit_admin_dialog=!0,this.edit_form.gid=t.group_id,this.edit_form.id=e,this.edit_form.nickname=t.nickname,this.edit_form.description=t.description,console.log(this.edit_form)},sub_edit:function(){var t=this;console.log("admins");var e={};e.id=this.edit_form.id,e.gid=this.edit_form.gid,e.description=this.edit_form.description,e.nickname=this.edit_form.nickname,this.http.post("admins/update_admin",{form:e}).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.edit_admin_dialog=!1,t.edit_form={nickname:"",description:"",gid:"",id:""},t._load()}))},cancel_edit:function(){this.edit_admin_dialog=!1,this.edit_form={gid:"",id:""}},del_admin:function(t){var e=this;console.log(t),this.$confirm("确定删除该管理员？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.put("admins/deleteAdmin",{id:t}).then((function(t){e.$message({type:"success",message:"删除成功!"}),e._load()}))}))},add_admin:function(){this.add_admin_dialog=!0},sub_add:function(){var t=this;return console.log(this.form.username.length),this.form.username.length<3?(this.$message({message:"用户名长度最少为3位",type:"warning"}),void(this.form.username="")):this.form.password.length<6?(this.$message({message:"密码长度不能小于6位",type:"warning"}),void(this.form.password="")):(console.log(this.form),void this.http.post("admins/createAdmin",this.form).then((function(e){t.$message({message:"添加成功",type:"success"}),t.form={gid:"",username:"",password:""},t.add_admin_dialog=!1,t._load()})))},cancel_add:function(){this.form={gid:"",username:"",password:""},this.add_admin_dialog=!1},get_gid:function(t){console.log(t)},handleClick:function(t,e){console.log(t,e)},handleClose:function(){this.form={gid:"",username:"",password:""},this.edit_form={gid:"",id:""},this.add_group_form={name:"",rule_ids:[]},this.edit_group_form={id:"",name:"",rule_ids:[]},this.edit_group_dialog=!1,this.add_group_dialog=!1,this.edit_admin_dialog=!1,this.add_admin_dialog=!1}}},d=r,s=(a("3151"),a("5d22")),u=Object(s["a"])(d,i,o,!1,null,null,null);e["default"]=u.exports},a450:function(t,e,a){var i=a("bb8b").f,o=Function.prototype,n=/^\s*function ([^ (]*)/,l="name";l in o||a("26df")&&i(o,l,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})}}]);